well tcpl macro chapter suggests a way to detect os by

#if SYSTEM == BSD 

...

but seems it does not work. There are an alternative methods. Check stack overflow.
